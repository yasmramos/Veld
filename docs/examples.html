<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examples - Veld DI Framework</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="logo">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 8px;">
                        <path d="M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z"/>
                    </svg>
                    Veld
                </a>
                
                <nav>
                    <ul class="nav-menu">
                        <li><a href="getting-started.html">Getting Started</a></li>
                        <li><a href="annotations.html">Annotations</a></li>
                        <li><a href="core-features.html">Core Features</a></li>
                        <li><a href="aop.html">AOP</a></li>
                        <li><a href="eventbus.html">EventBus</a></li>
                <li><a href="spring-boot.html">Spring Boot Integration</a></li>
                        <li><a href="spring-boot.html">Spring Boot</a></li>
                        <li><a href="spring-boot.html">Spring Boot</a></li>
                        <li><a href="api.html">API Reference</a></li>
                        <li><a href="examples.html" class="active">Examples</a></li>
                    </ul>
                </nav>
                
                <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">‚ò∞</button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-layout">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <h3>Documentation</h3>
            <ul class="sidebar-nav">
                <li><a href="index.html">Overview</a></li>
                <li><a href="getting-started.html">Getting Started</a></li>
                <li><a href="installation.html">Installation</a></li>
                <li><a href="annotations.html">Annotations Reference</a></li>
                <li><a href="core-features.html">Core Features</a></li>
                <li><a href="aop.html">Aspect-Oriented Programming</a></li>
                <li><a href="eventbus.html">EventBus</a></li>
                <li><a href="spring-boot.html">Spring Boot Integration</a></li>
                        <li><a href="spring-boot.html">Spring Boot</a></li>
                <li><a href="optimizations.html">Optimizations</a></li>
                <li><a href="examples.html" class="active">Examples</a></li>
            </ul>
        </nav>

        <!-- Main Content Area -->
        <div class="content">
            <div class="content-header">
                <h1>üí° Practical Examples</h1>
                <p class="subtitle">Real-world usage patterns and code examples</p>
            </div>

            <div class="content-body">
                <section class="basic-examples">
                    <h2>üèóÔ∏è Basic Examples</h2>
                    
                    <div class="example-section">
                        <h3>1. Simple Dependency Injection</h3>
                        
                        <div class="code-block">
                            <div class="code-header">
                                <span>UserRepository.java</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre><code>@Component
@Singleton
public class UserRepository {
    
    private final Map&lt;String, User&gt; users = new ConcurrentHashMap&lt;&gt;();
    
    public User save(User user) {
        users.put(user.getId(), user);
        return user;
    }
    
    public Optional&lt;User&gt; findById(String id) {
        return Optional.ofNullable(users.get(id));
    }
    
    public List&lt;User&gt; findAll() {
        return new ArrayList&lt;&gt;(users.values());
    }
}</code></pre>
                        </div>

                        <div class="code-block">
                            <div class="code-header">
                                <span>UserService.java</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre><code>@Component
public class UserService {
    
    private final UserRepository userRepository;
    private final NotificationService notificationService;
    
    @Inject
    public UserService(UserRepository userRepository, NotificationService notificationService) {
        this.userRepository = userRepository;
        this.notificationService = notificationService;
    }
    
    public User createUser(String name, String email) {
        User user = new User(name, email);
        User saved = userRepository.save(user);
        
        // Notify about new user
        notificationService.sendWelcomeEmail(saved);
        
        return saved;
    }
    
    public Optional&lt;User&gt; getUser(String id) {
        return userRepository.findById(id);
    }
}</code></pre>
                        </div>
                    </div>
                </section>

                <section class="configuration-examples">
                    <h2>‚öôÔ∏è Configuration Examples</h2>
                    
                    <div class="example-section">
                        <h3>2. External Configuration with @Value</h3>
                        
                        <div class="code-block">
                            <div class="code-header">
                                <span>DatabaseConfig.java</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre><code>@Component
public class DatabaseConfig {
    
    @Value("${database.url}")
    private String url;
    
    @Value("${database.username}")
    private String username;
    
    @Value("${database.password}")
    private String password;
    
    @Value("${database.pool.size:10}")
    private int poolSize;
    
    @Value("${database.ssl.enabled:false}")
    private boolean sslEnabled;
    
    @Value("${database.timeout:30000}")
    private Duration timeout;
    
    @PostConstruct
    public void validate() {
        if (url == null || url.trim().isEmpty()) {
            throw new IllegalArgumentException("Database URL is required");
        }
        if (poolSize &lt;= 0 || poolSize &gt; 50) {
            throw new IllegalArgumentException("Pool size must be between 1 and 50");
        }
    }
    
    public HikariConfig createHikariConfig() {
        HikariConfig config = new HikariConfig();
        config.setJdbcUrl(url);
        config.setUsername(username);
        config.setPassword(password);
        config.setMaximumPoolSize(poolSize);
        config.setConnectionTimeout(timeout.toMillis());
        config.setIdleTimeout(Duration.ofMinutes(10).toMillis());
        config.setLeakDetectionThreshold(Duration.ofSeconds(60).toMillis());
        
        Properties props = new Properties();
        props.setProperty("ssl", sslEnabled ? "require" : "disable");
        config.setDataSourceProperties(props);
        
        return config;
    }
}</code></pre>
                        </div>

                        <div class="code-block">
                            <div class="code-header">
                                <span>DatabaseService.java</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre><code>@Component
@Singleton
public class DatabaseService {
    
    private final DataSource dataSource;
    
    @Inject
    public DatabaseService(DatabaseConfig config) {
        HikariConfig hikariConfig = config.createHikariConfig();
        this.dataSource = new HikariDataSource(hikariConfig);
    }
    
    public void executeQuery(String sql) throws SQLException {
        try (Connection conn = dataSource.getConnection();
             PreparedStatement stmt = conn.prepareStatement(sql);
             ResultSet rs = stmt.executeQuery()) {
            
            // Process results
            while (rs.next()) {
                // Handle result set
            }
        }
    }
    
    @PreDestroy
    public void cleanup() {
        if (dataSource instanceof HikariDataSource) {
            ((HikariDataSource) dataSource).close();
        }
    }
}</code></pre>
                        </div>
                    </div>
                </section>

                <section class="lifecycle-examples">
                    <h2>üîÑ Lifecycle Management Examples</h2>
                    
                    <div class="example-section">
                        <h3>3. Lifecycle Callbacks</h3>
                        
                        <div class="code-block">
                            <div class="code-header">
                                <span>CacheManager.java</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre><code>@Component
@Singleton
public class CacheManager {
    
    private final Cache&lt;String, Object&gt; cache;
    private final ScheduledExecutorService scheduler;
    
    @Inject
    public CacheManager(@Value("${cache.max.size:1000}") int maxSize,
                       @Value("${cache.expire.minutes:30}") int expireMinutes) {
        this.cache = Caffeine.newBuilder()
            .maximumSize(maxSize)
            .expireAfterWrite(Duration.ofMinutes(expireMinutes))
            .recordStats()
            .build();
            
        this.scheduler = Executors.newScheduledThreadPool(2);
    }
    
    @PostConstruct
    public void initialize() {
        System.out.println("Cache Manager initialized");
        
        // Start background tasks
        scheduler.scheduleAtFixedRate(this::cleanupExpiredEntries, 
            5, 5, TimeUnit.MINUTES);
            
        scheduler.scheduleAtFixedRate(this::logStats, 
            1, 1, TimeUnit.MINUTES);
    }
    
    @PreDestroy
    public void shutdown() {
        System.out.println("Cache Manager shutting down");
        
        scheduler.shutdown();
        try {
            if (!scheduler.awaitTermination(10, TimeUnit.SECONDS)) {
                scheduler.shutdownNow();
            }
        } catch (InterruptedException e) {
            scheduler.shutdownNow();
            Thread.currentThread().interrupt();
        }
        
        // Cleanup cache
        cache.cleanUp();
    }
    
    private void cleanupExpiredEntries() {
        cache.cleanUp();
    }
    
    private void logStats() {
        CacheStats stats = cache.stats();
        System.out.println("Cache stats: hitRate=" + stats.hitRate() + 
                         ", size=" + cache.estimatedSize());
    }
    
    public &lt;T&gt; T get(String key, Class&lt;T&gt; type) {
        return type.cast(cache.getIfPresent(key));
    }
    
    public void put(String key, Object value) {
        cache.put(key, value);
    }
}</code></pre>
                        </div>
                    </div>
                </section>

                <section class="thread-safety-examples">
                    <h2>üßµ Thread Safety Examples</h2>
                    
                    <div class="example-section">
                        <h3>4. Concurrent Access Patterns</h3>
                        
                        <div class="code-block">
                            <div class="code-header">
                                <span>CounterService.java</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre><code>@Component
@ThreadSafe
public class CounterService {
    
    private final AtomicLong counter = new AtomicLong(0);
    private final AtomicReference&lt;Map&lt;String, Long&gt;&gt; metrics = 
        new AtomicReference&lt;&gt;(new ConcurrentHashMap&lt;&gt;());
    
    @Inject
    private CacheService cacheService;
    
    public long incrementAndGet() {
        return counter.incrementAndGet();
    }
    
    public long decrementAndGet() {
        return counter.decrementAndGet();
    }
    
    public long get() {
        return counter.get();
    }
    
    public void recordMetric(String name, long value) {
        metrics.updateAndGet(map -&gt; {
            map.put(name, map.getOrDefault(name, 0L) + value);
            return map;
        });
    }
    
    public Map&lt;String, Long&gt; getMetrics() {
        return new HashMap&lt;&gt;(metrics.get());
    }
}</code></pre>
                        </div>

                        <div class="code-block">
                            <div class="code-header">
                                <span>ConcurrentProcessor.java</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre><code>@Component
public class ConcurrentProcessor {
    
    @Inject
    private CounterService counterService;
    
    public void processBatch(List&lt;String&gt; items) {
        items.parallelStream().forEach(item -&gt; {
            // Increment counter for each item
            long current = counterService.incrementAndGet();
            
            // Process item
            processItem(item);
            
            // Record metric
            counterService.recordMetric("processed_items", 1);
            
            if (current % 1000 == 0) {
                System.out.println("Processed " + current + " items");
            }
        });
    }
    
    private void processItem(String item) {
        // Business logic here
    }
}</code></pre>
                        </div>
                    </div>
                </section>

                <section class="factory-pattern-examples">
                    <h2>üéØ Factory Pattern Examples</h2>
                    
                    <div class="example-section">
                        <h3>5. Factory Pattern Implementation</h3>
                        
                        <div class="code-block">
                            <div class="code-header">
                                <span>MessageFactory.java</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre><code>@Component
public class MessageFactory {
    
    @Inject
    private EmailService emailService;
    
    @Inject
    private SMSService smsService;
    
    public Message createEmail(String to, String subject, String body) {
        return new EmailMessage(to, subject, body);
    }
    
    public Message createSMS(String to, String message) {
        return new SMSMessage(to, message);
    }
    
    public Message createMessage(MessageType type, String... params) {
        return switch (type) {
            case EMAIL -&gt; createEmail(params[0], params[1], params[2]);
            case SMS -&gt; createSMS(params[0], params[1]);
            default -&gt; throw new IllegalArgumentException("Unknown message type: " + type);
        };
    }
}

enum MessageType {
    EMAIL, SMS
}</code></pre>
                        </div>

                        <div class="code-block">
                            <div class="code-header">
                                <span>NotificationService.java</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre><code>@Component
public class NotificationService {
    
    @Inject
    private MessageFactory messageFactory;
    
    public void sendWelcomeMessage(String userEmail, String userPhone) {
        // Create email
        Message welcomeEmail = messageFactory.createMessage(
            MessageType.EMAIL, 
            userEmail, 
            "Welcome!", 
            "Welcome to our platform!"
        );
        
        // Create SMS
        Message welcomeSMS = messageFactory.createMessage(
            MessageType.SMS,
            userPhone,
            "Welcome to our platform!"
        );
        
        // Send both
        welcomeEmail.send();
        welcomeSMS.send();
    }
}</code></pre>
                        </div>
                    </div>
                </section>

                <section class="event-system-examples">
                    <h2>üîî Event System Examples</h2>
                    
                    <div class="example-section">
                        <h3>6. Event-Driven Architecture</h3>
                        
                        <div class="code-block">
                            <div class="code-header">
                                <span>Event Classes</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre><code>public abstract class DomainEvent {
    private final String eventId;
    private final Instant timestamp;
    
    public DomainEvent() {
        this.eventId = UUID.randomUUID().toString();
        this.timestamp = Instant.now();
    }
    
    public String getEventId() { return eventId; }
    public Instant getTimestamp() { return timestamp; }
}

public class UserCreatedEvent extends DomainEvent {
    private final User user;
    
    public UserCreatedEvent(User user) {
        this.user = user;
    }
    
    public User getUser() { return user; }
}

public class OrderPlacedEvent extends DomainEvent {
    private final Order order;
    
    public OrderPlacedEvent(Order order) {
        this.order = order;
    }
    
    public Order getOrder() { return order; }
}</code></pre>
                        </div>

                        <div class="code-block">
                            <div class="code-header">
                                <span>Event Publisher and Handlers</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre><code>@Component
public class EventPublisher {
    
    @Inject
    private EventBus eventBus;
    
    public void publish(DomainEvent event) {
        eventBus.publish(event);
    }
    
    public void publishAsync(DomainEvent event) {
        eventBus.publishAsync(event);
    }
}

@Component
public class EmailNotificationHandler {
    
    @Inject
    private EmailService emailService;
    
    @EventHandler
    public void onUserCreated(UserCreatedEvent event) {
        User user = event.getUser();
        String subject = "Welcome " + user.getName();
        String body = "Thank you for joining our platform!";
        emailService.sendEmail(user.getEmail(), subject, body);
    }
    
    @EventHandler
    public void onOrderPlaced(OrderPlacedEvent event) {
        Order order = event.getOrder();
        String subject = "Order Confirmation #" + order.getId();
        String body = "Your order has been placed successfully.";
        emailService.sendEmail(order.getCustomerEmail(), subject, body);
    }
}</code></pre>
                        </div>
                    </div>
                </section>

                <section class="testing-examples">
                    <h2>üß™ Testing Examples</h2>
                    
                    <div class="example-section">
                        <h3>7. Unit Testing with Veld</h3>
                        
                        <div class="code-block">
                            <div class="code-header">
                                <span>Test Configuration</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre><code>@Configuration
@TestConfiguration
public class TestConfig {
    
    @Bean
    @Primary
    public UserRepository testUserRepository() {
        return new InMemoryUserRepository();
    }
    
    @Bean
    @Primary
    public EmailService testEmailService() {
        return new MockEmailService();
    }
}

@Component
@Primary
public class MockEmailService implements EmailService {
    
    private final List&lt;EmailMessage&gt; sentEmails = new ArrayList&lt;&gt;();
    
    @Override
    public void sendEmail(String to, String subject, String body) {
        sentEmails.add(new EmailMessage(to, subject, body));
    }
    
    public List&lt;EmailMessage&gt; getSentEmails() {
        return new ArrayList&lt;&gt;(sentEmails);
    }
}

@Component
@Primary
public class InMemoryUserRepository implements UserRepository {
    
    private final Map&lt;String, User&gt; users = new HashMap&lt;&gt;();
    
    @Override
    public User save(User user) {
        users.put(user.getId(), user);
        return user;
    }
    
    @Override
    public Optional&lt;User&gt; findById(String id) {
        return Optional.ofNullable(users.get(id));
    }
}</code></pre>
                        </div>

                        <div class="code-block">
                            <div class="code-header">
                                <span>UserServiceTest.java</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre><code>@Component
public class UserServiceTest {
    
    @Inject
    private UserService userService;
    @Inject
    private MockEmailService emailService;
    
    @Test
    public void testCreateUser() {
        // Given
        String name = "Test User";
        String email = "test@example.com";
        
        // When
        User user = userService.createUser(name, email);
        
        // Then
        assertThat(user).isNotNull();
        assertThat(user.getName()).isEqualTo(name);
        assertThat(user.getEmail()).isEqualTo(email);
        assertThat(emailService.getSentEmails()).hasSize(1);
        assertThat(emailService.getSentEmails().get(0).getTo()).isEqualTo(email);
    }
}</code></pre>
                        </div>
                    </div>
                </section>

                <section class="integration-examples">
                    <h2>üåü Integration Examples</h2>
                    
                    <div class="example-section">
                        <h3>8. Spring Boot Integration</h3>
                        
                        <div class="code-block">
                            <div class="code-header">
                                <span>HybridService.java</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre><code>@SpringBootApplication
public class VeldSpringBootApplication {
    
    public static void main(String[] args) {
        SpringApplication.run(VeldSpringBootApplication.class, args);
    }
}

// Hybrid service using both Veld and Spring
@Component
public class HybridService {
    
    @Inject
    private VeldComponent veldComponent; // From Veld
    
    @Autowired
    private SpringComponent springComponent; // From Spring
    
    public void doComplexWork() {
        // Use Veld component for ultra-fast operations
        Object veldResult = veldComponent.processFast();
        
        // Use Spring component for enterprise features
        Object springResult = springComponent.processWithTransaction();
        
        // Combine results
        return combineResults(veldResult, springResult);
    }
}

// Veld component
@Component
public class VeldComponent {
    
    @Inject
    private FastCache cache;
    
    public Object processFast() {
        // Ultra-fast processing
        return cache.get("fast-data");
    }
}

// Spring component
@Component
public class SpringComponent {
    
    @Autowired
    private JdbcTemplate jdbcTemplate;
    
    @Transactional
    public Object processWithTransaction() {
        // Enterprise-grade processing with transactions
        return jdbcTemplate.queryForObject("SELECT COUNT(*) FROM users", Long.class);
    }
}</code></pre>
                        </div>
                    </div>
                </section>

                <section class="performance-examples">
                    <h2>üöÄ Performance Examples</h2>
                    
                    <div class="example-section">
                        <h3>9. High-Performance Caching</h3>
                        
                        <div class="code-block">
                            <div class="code-header">
                                <span>PerformanceService.java</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre><code>@Component
@Singleton
public class PerformanceService {
    
    @Inject
    private Cache&lt;String, ExpensiveResult&gt; cache;
    
    public ExpensiveResult computeExpensiveOperation(String key, Supplier&lt;ExpensiveResult&gt; computation) {
        // Check cache first
        ExpensiveResult cached = cache.get(key);
        if (cached != null) {
            return cached;
        }
        
        // Compute if not cached
        ExpensiveResult result = computation.get();
        cache.put(key, result);
        
        return result;
    }
    
    public List&lt;ExpensiveResult&gt; processBatch(List&lt;String&gt; keys) {
        return keys.parallelStream()
            .map(key -&gt; computeExpensiveOperation(key, () -&gt; expensiveComputation(key)))
            .collect(Collectors.toList());
    }
    
    private ExpensiveResult expensiveComputation(String key) {
        // Simulate expensive computation
        try {
            Thread.sleep(100); // Simulate I/O or heavy computation
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
            throw new RuntimeException("Computation interrupted", e);
        }
        return new ExpensiveResult(key, System.currentTimeMillis());
    }
}</code></pre>
                        </div>
                    </div>
                </section>

                <section class="best-practices">
                    <h2>üí° Best Practices</h2>
                    
                    <div class="example-section">
                        <h3>10. Design Patterns and Best Practices</h3>
                        
                        <div class="code-grid">
                            <div class="practice-card good">
                                <h4>‚úÖ Good: Constructor injection with final fields</h4>
                                <div class="code-block small">
                                    <pre><code>@Component
public class GoodService {
    
    private final UserRepository userRepository;
    private final NotificationService notification;
    
    @Inject
    public GoodService(UserRepository userRepository, NotificationService notification) {
        this.userRepository = userRepository;
        this.notification = notification;
    }
    
    // Business methods...
}</code></pre>
                                </div>
                            </div>

                            <div class="practice-card bad">
                                <h4>‚ùå Avoid: Field injection (harder to test)</h4>
                                <div class="code-block small">
                                    <pre><code>@Component
public class BadService {
    
    @Inject
    private UserRepository userRepository; // Circular dependency risk
}</code></pre>
                                </div>
                            </div>

                            <div class="practice-card good">
                                <h4>‚úÖ Good: Immutable configuration</h4>
                                <div class="code-block small">
                                    <pre><code>@Component
@Immutable
public class AppConfig {
    
    private final String apiKey;
    private final int timeout;
    private final boolean debugMode;
    
    @Inject
    public AppConfig(@Value("${api.key}") String apiKey,
                    @Value("${api.timeout:5000}") int timeout,
                    @Value("${api.debug:false}") boolean debugMode) {
        this.apiKey = apiKey;
        this.timeout = timeout;
        this.debugMode = debugMode;
    }
}</code></pre>
                                </div>
                            </div>

                            <div class="practice-card good">
                                <h4>‚úÖ Good: Proper lifecycle management</h4>
                                <div class="code-block small">
                                    <pre><code>@Component
public class ResourceManager {
    
    private ExpensiveResource resource;
    
    @PostConstruct
    public void initialize() {
        this.resource = ExpensiveResource.create();
    }
    
    @PreDestroy
    public void cleanup() {
        if (resource != null) {
            resource.close();
        }
    }
}</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="conclusion">
                    <h2>üéâ Conclusion</h2>
                    <p>These examples demonstrate Veld's flexibility, performance, and ease of use in real-world scenarios. Each example showcases different aspects of the framework while maintaining the ultra-fast performance characteristics.</p>
                    
                    <div class="next-steps-grid">
                        <a href="core-features.html" class="next-step">
                            <h3>üìö Core Features</h3>
                            <p>Learn more about Veld's architecture and performance</p>
                        </a>
                        <a href="annotations.html" class="next-step">
                            <h3>üìã Annotations Reference</h3>
                            <p>Explore all available annotations and their usage</p>
                        </a>
                        <a href="aop.html" class="next-step">
                            <h3>üîß AOP Guide</h3>
                            <p>Advanced aspect-oriented programming features</p>
                        </a>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- Scroll to Top Button -->
    <button id="scrollTop" class="scroll-top" onclick="scrollToTop()">‚Üë</button>

    <script src="js/main.js"></script>
</body>
</html>