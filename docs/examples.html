<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examples - Veld DI Framework</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="logo">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 8px;">
                        <path d="M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z"/>
                    </svg>
                    Veld
                </a>
                
                <nav>
                    <ul class="nav-menu">
                        <li><a href="getting-started.html">Getting Started</a></li>
                        <li><a href="annotations.html">Annotations</a></li>
                        <li><a href="core-features.html">Core Features</a></li>
                        <li><a href="aop.html">AOP</a></li>
                        <li><a href="eventbus.html">EventBus</a></li>
                        <li><a href="spring-boot.html">Spring Boot</a></li>
                        <li><a href="api.html">API Reference</a></li>
                        <li><a href="examples.html" class="active">Examples</a></li>
                    </ul>
                </nav>
                
                <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">‚ò∞</button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-layout">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <h3>Documentation</h3>
            <ul class="sidebar-nav">
                <li><a href="index.html">Overview</a></li>
                <li><a href="getting-started.html">Getting Started</a></li>
                <li><a href="installation.html">Installation</a></li>
                <li><a href="annotations.html">Annotations Reference</a></li>
                <li><a href="core-features.html">Core Features</a></li>
                <li><a href="aop.html">Aspect-Oriented Programming</a></li>
                <li><a href="eventbus.html">EventBus</a></li>
                <li><a href="spring-boot.html">Spring Boot Integration</a></li>
                <li><a href="optimizations.html">Phase 1 Optimizations</a></li>
                <li><a href="api.html">API Reference</a></li>
                <li><a href="examples.html" class="active">Examples</a></li>
            </ul>
        </nav>

        <!-- Content -->
        <div class="content">
            <h1>üéØ Examples</h1>
            
            <div class="alert alert-info">
                <strong>üìö Collection:</strong> Practical examples demonstrating Veld's capabilities in real-world scenarios. Each example includes complete code and explanations.
            </div>

            <!-- Basic Examples -->
            <section>
                <h2>üèóÔ∏è Basic Examples</h2>
                
                <div class="card">
                    <h3>Simple Dependency Injection</h3>
                    <p>A basic example showing constructor and field injection:</p>
                    
<pre><code>// Service layer
@Component
@Singleton
public class UserService {
    private final UserRepository userRepository;
    
    @Inject
    public UserService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }
    
    public User createUser(String name, String email) {
        User user = new User(name, email);
        return userRepository.save(user);
    }
    
    public Optional&lt;User&gt; findUser(String id) {
        return userRepository.findById(id);
    }
}

// Repository layer
@Component
@Singleton
public class UserRepository {
    private final Map&lt;String, User&gt; users = new ConcurrentHashMap&lt;&gt;();
    
    public User save(User user) {
        users.put(user.getId(), user);
        return user;
    }
    
    public Optional&lt;User&gt; findById(String id) {
        return Optional.ofNullable(users.get(id));
    }
}

// Main application
@Component
public class Application {
    
    @Inject
    private UserService userService;
    
    public void run() {
        User user = userService.createUser("John Doe", "john@example.com");
        System.out.println("Created user: " + user);
        
        Optional&lt;User&gt; found = userService.findUser(user.getId());
        System.out.println("Found user: " + found.orElse(null));
    }
    
    public static void main(String[] args) {
        // Use the generated Veld class;
        container.start();
        
        Application app = container.getBean(Application.class);
        app.run();
        
        container.shutdown();
    }
}</code></pre>
                </div>

                <div class="card">
                    <h3>Configuration and @Value Injection</h3>
                    <p>Using configuration properties with @Value annotation:</p>
                    
<pre><code>// Configuration properties
@Component
public class DatabaseConfig {
    
    @Value("${database.url}")
    private String url;
    
    @Value("${database.username}")
    private String username;
    
    @Value("${database.password}")
    private String password;
    
    @Value("${database.pool.size:10}")
    private int poolSize;
    
    @Value("${database.ssl.enabled:false}")
    private boolean sslEnabled;
    
    // Validation
    @PostConstruct
    public void validate() {
        if (url == null || url.trim().isEmpty()) {
            throw new IllegalArgumentException("Database URL is required");
        }
        if (poolSize &lt;= 0) {
            throw new IllegalArgumentException("Pool size must be positive");
        }
    }
    
    // Factory method
    public Connection createConnection() throws SQLException {
        Properties props = new Properties();
        props.setProperty("user", username);
        props.setProperty("password", password);
        props.setProperty("ssl", sslEnabled ? "require" : "disable");
        
        return DriverManager.getConnection(url, props);
    }
}

// Usage
@Component
@Singleton
public class DatabaseService {
    
    private final DatabaseConfig config;
    private final ConnectionPool pool;
    
    @Inject
    public DatabaseService(DatabaseConfig config) {
        this.config = config;
        this.pool = new ConnectionPool(config.getPoolSize(), config);
    }
    
    @PreDestroy
    public void shutdown() {
        pool.shutdown();
    }
}</code></pre>

                    <h4>Configuration File (application.properties)</h4>
<pre><code># Database configuration
database.url=jdbc:postgresql://localhost:5432/myapp
database.username=app_user
database.password=${DB_PASSWORD}
database.pool.size=20
database.ssl.enabled=true

# Application settings
app.name=MyVeldApp
app.version=1.0.0
app.debug=false</code></pre>
                </div>
            </section>

            <!-- Advanced Examples -->
            <section>
                <h2>üöÄ Advanced Examples</h2>
                
                <div class="card">
                    <h3>Event-Driven Architecture</h3>
                    <p>Building a complete event-driven system with EventBus:</p>
                    
<pre><code>// Event definitions
public record UserRegisteredEvent(String userId, String email, Instant timestamp) {}
public record OrderCreatedEvent(String orderId, String userId, List&lt;OrderItem&gt; items, BigDecimal total) {}
public record EmailEvent(String to, String subject, String body) {}

// Event publishers
@Component
@Singleton
public class UserRegistrationService {
    
    @Inject
    private UserRepository userRepository;
    
    @Inject
    private EventBus eventBus;
    
    public User registerUser(String name, String email) {
        User user = new User(name, email);
        User saved = userRepository.save(user);
        
        // Publish event
        eventBus.publish(new UserRegisteredEvent(saved.getId(), email, Instant.now()));
        
        return saved;
    }
}

@Component
@Singleton
public class OrderService {
    
    @Inject
    private OrderRepository orderRepository;
    
    @Inject
    private EventBus eventBus;
    
    public Order createOrder(String userId, List&lt;OrderItem&gt; items) {
        BigDecimal total = items.stream()
            .map(OrderItem::getTotal)
            .reduce(BigDecimal.ZERO, BigDecimal::add);
            
        Order order = new Order(userId, items, total);
        Order saved = orderRepository.save(order);
        
        // Publish events
        eventBus.publish(new OrderCreatedEvent(saved.getId(), userId, items, total));
        
        return saved;
    }
}

// Event handlers
@Component
public class EmailNotificationHandler {
    
    @Inject
    private;
    
    @ EmailService emailServiceSubscribe
    public void handleUserRegistration(UserRegisteredEvent event) {
        String welcomeMessage = "Welcome to our platform! Your account has been created.";
        eventBus.publish(new EmailEvent(event.email(), "Welcome!", welcomeMessage));
    }
    
    @Subscribe
    public void handleOrderCreation(OrderCreatedEvent event) {
        String orderMessage = String.format("Your order %s has been created. Total: $%.2f", 
                                           event.orderId(), event.total());
        // Get user email from user service
        String userEmail = getUserEmail(event.userId());
        eventBus.publish(new EmailEvent(userEmail, "Order Confirmation", orderMessage));
    }
}

@Component
public class AuditHandler {
    
    @Inject
    private AuditLogger auditLogger;
    
    @Subscribe
    public void auditUserRegistration(UserRegisteredEvent event) {
        auditLogger.log("USER_REGISTERED", Map.of(
            "userId", event.userId(),
            "email", event.email(),
            "timestamp", event.timestamp()
        ));
    }
    
    @Subscribe
    public void auditOrderCreation(OrderCreatedEvent event) {
        auditLogger.log("ORDER_CREATED", Map.of(
            "orderId", event.orderId(),
            "userId", event.userId(),
            "total", event.total(),
            "itemCount", event.items().size()
        ));
    }
}</code></pre>
                </div>

                <div class="card">
                    <h3>Aspect-Oriented Programming</h3>
                    <p>Cross-cutting concerns with AOP:</p>
                    
<pre><code>// Logging Aspect
@Aspect
@Component
@Singleton
public class LoggingAspect {
    
    @Inject
    private AuditLogger auditLogger;
    
    @Pointcut("execution(* com.example.service.*.*(..))")
    public void serviceMethods() {}
    
    @Pointcut("execution(* com.example.controller.*.*(..))")
    public void controllerMethods() {}
    
    @Before("serviceMethods() || controllerMethods()")
    public void logMethodEntry(JoinPoint joinPoint) {
        String methodName = joinPoint.getSignature().getName();
        Object[] args = joinPoint.getArgs();
        
        auditLogger.debug("Method entry: " + methodName, Map.of(
            "args", Arrays.toString(args),
            "timestamp", Instant.now()
        ));
    }
    
    @After("serviceMethods() || controllerMethods()")
    public void logMethodExit(JoinPoint joinPoint) {
        String methodName = joinPoint.getSignature().getName();
        auditLogger.debug("Method exit: " + methodName);
    }
}

// Performance Monitoring Aspect
@Aspect
@Component
@Singleton
public class PerformanceAspect {
    
    @Pointcut("execution(* com.example.service.*.*(..))")
    public void serviceMethods() {}
    
    @Around("serviceMethods()")
    public Object monitorPerformance(ProceedingJoinPoint joinPoint) throws Throwable {
        String methodName = joinPoint.getSignature().getName();
        long startTime = System.nanoTime();
        
        try {
            Object result = joinPoint.proceed();
            return result;
        } finally {
            long duration = System.nanoTime() - startTime;
            
            if (duration &gt; 1_000_000) { // Log slow methods (&gt;1ms)
                auditLogger.warn("Slow method execution", Map.of(
                    "method", methodName,
                    "duration_ms", duration / 1_000_000.0
                ));
            }
        }
    }
}

// Transaction Management Aspect
@Aspect
@Component
@Singleton
public class TransactionAspect {
    
    @Pointcut("@annotation(Transactional)")
    public void transactionalMethods() {}
    
    @Around("transactionalMethods()")
    public Object manageTransaction(ProceedingJoinPoint joinPoint) throws Throwable {
        TransactionManager.beginTransaction();
        
        try {
            Object result = joinPoint.proceed();
            TransactionManager.commitTransaction();
            return result;
        } catch (Exception e) {
            TransactionManager.rollbackTransaction();
            throw e;
        }
    }
}

// Usage with annotations
@Component
@Singleton
public class UserService {
    
    @Inject
    private UserRepository userRepository;
    
    @Transactional
    public User createUser(String name, String email) {
        // This method will be logged and run in a transaction
        User user = new User(name, email);
        return userRepository.save(user);
    }
    
    public Optional&lt;User&gt; findUser(String id) {
        // This method will only be logged
        return userRepository.findById(id);
    }
}</code></pre>
                </div>
            </section>

            <!-- Integration Examples -->
            <section>
                <h2>üîó Integration Examples</h2>
                
                <div class="card">
                    <h3>REST API with Veld</h3>
                    <p>Building a complete REST API using Veld:</p>
                    
<pre><code>// REST Controller
@Component
@Path("/users")
public class UserController {
    
    @Inject
    private UserService userService;
    
    @GET
    @Path("/{id}")
    public Response getUser(@PathParam("id") String id) {
        return userService.findUser(id)
            .map(user -&gt; Response.ok(user).build())
            .orElse(Response.status(404).build());
    }
    
    @POST
    @Consumes(MediaType.APPLICATION_JSON)
    public Response createUser(UserCreateRequest request) {
        try {
            User user = userService.createUser(request.getName(), request.getEmail());
            return Response.status(201).entity(user).build();
        } catch (Exception e) {
            return Response.status(400)
                .entity(new ErrorResponse("Failed to create user", e.getMessage()))
                .build();
        }
    }
    
    @GET
    @Path("/{id}/orders")
    public Response getUserOrders(@PathParam("id") String id) {
        List&lt;Order&gt; orders = userService.getUserOrders(id);
        return Response.ok(orders).build();
    }
}

// Request/Response DTOs
@Component
public class UserCreateRequest {
    private String name;
    private String email;
    
    // Getters and setters
    public String getName() { return name; }
    public void setName(String name) { this.name = name; }
    public String getEmail() { return email; }
    public void setEmail(String email) { this.email = email; }
}

@Component
public class ErrorResponse {
    private String error;
    private String message;
    private Instant timestamp;
    
    public ErrorResponse(String error, String message) {
        this.error = error;
        this.message = message;
        this.timestamp = Instant.now();
    }
    
    // Getters
    public String getError() { return error; }
    public String getMessage() { return message; }
    public Instant getTimestamp() { return timestamp; }
}

// Service layer with validation
@Component
@Singleton
public class UserService {
    
    @Inject
    private UserRepository userRepository;
    
    @Inject
    private EmailService emailService;
    
    @Inject
    private EventBus eventBus;
    
    public User createUser(String name, String email) {
        // Validation
        if (name == null || name.trim().isEmpty()) {
            throw new IllegalArgumentException("Name is required");
        }
        if (email == null || !isValidEmail(email)) {
            throw new IllegalArgumentException("Valid email is required");
        }
        
        // Check for duplicates
        if (userRepository.findByEmail(email).isPresent()) {
            throw new IllegalArgumentException("User with email already exists");
        }
        
        // Create user
        User user = new User(name.trim(), email.toLowerCase());
        User saved = userRepository.save(user);
        
        // Send welcome email asynchronously
        eventBus.publish(new EmailEvent(email, "Welcome!", 
            "Welcome to our platform, " + name + "!"));
        
        return saved;
    }
    
    private boolean isValidEmail(String email) {
        return email.matches("^[A-Za-z0-9+_.-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$");
    }
}</code></pre>
                </div>

                <div class="card">
                    <h3>Database Integration with JPA</h3>
                    <p>Using Veld with JPA/Hibernate:</p>
                    
<pre><code>// JPA Configuration
@Component
@Singleton
public class JpaConfig {
    
    @Value("${database.url}")
    private String url;
    
    @Value("${database.username}")
    private String username;
    
    @Value("${database.password}")
    private String password;
    
    @Inject
    private DataSource dataSource;
    
    @Bean
    public EntityManagerFactory entityManagerFactory() {
        Properties jpaProperties = new Properties();
        jpaProperties.setProperty("javax.persistence.jdbc.driver", "org.postgresql.Driver");
        jpaProperties.setProperty("javax.persistence.jdbc.url", url);
        jpaProperties.setProperty("javax.persistence.jdbc.user", username);
        jpaProperties.setProperty("javax.persistence.jdbc.password", password);
        
        // Veld-specific optimizations
        jpaProperties.setProperty("hibernate.hbm2ddl.auto", "update");
        jpaProperties.setProperty("hibernate.show_sql", "false");
        jpaProperties.setProperty("hibernate.format_sql", "true");
        
        LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();
        factory.setDataSource(dataSource);
        factory.setPackagesToScan("com.example.entity");
        factory.setJpaProperties(jpaProperties);
        factory.afterPropertiesSet();
        
        return factory.getObject();
    }
    
    @Bean
    public PlatformTransactionManager transactionManager(EntityManagerFactory emf) {
        return new JpaTransactionManager(emf);
    }
}

// JPA Repository with Veld
@Component
@Singleton
public class UserRepository {
    
    @Inject
    private EntityManagerFactory entityManagerFactory;
    
    public User save(User user) {
        EntityManager em = entityManagerFactory.createEntityManager();
        try {
            em.getTransaction().begin();
            User saved = em.merge(user);
            em.getTransaction().commit();
            return saved;
        } catch (Exception e) {
            if (em.getTransaction().isActive()) {
                em.getTransaction().rollback();
            }
            throw e;
        } finally {
            em.close();
        }
    }
    
    public Optional&lt;User&gt; findById(String id) {
        EntityManager em = entityManagerFactory.createEntityManager();
        try {
            User user = em.find(User.class, id);
            return Optional.ofNullable(user);
        } finally {
            em.close();
        }
    }
    
    public Optional&lt;User&gt; findByEmail(String email) {
        EntityManager em = entityManagerFactory.createEntityManager();
        try {
            TypedQuery&lt;User&gt; query = em.createQuery(
                "SELECT u FROM User u WHERE u.email = :email", User.class);
            query.setParameter("email", email);
            return query.getResultStream().findFirst();
        } finally {
            em.close();
        }
    }
}</code></pre>
                </div>
            </section>

            <!-- Real-world Scenarios -->
            <section>
                <h2>üåç Real-World Scenarios</h2>
                
                <div class="card">
                    <h3>E-commerce Application</h3>
                    <p>Complete e-commerce system with all Veld features:</p>
                    
<pre><code>// Domain entities
@Entity
@Table(name = "products")
public class Product {
    @Id
    private String id;
    private String name;
    private String description;
    private BigDecimal price;
    private int stockQuantity;
    private Instant createdAt;
    
    // Constructors, getters, setters
}

@Entity
@Table(name = "orders")
public class Order {
    @Id
    private String id;
    private String userId;
    private List&lt;OrderItem&gt; items;
    private BigDecimal total;
    private OrderStatus status;
    private Instant createdAt;
    
    // Constructors, getters, setters
}

// Services
@Component
@Singleton
public class ProductService {
    
    @Inject
    private ProductRepository productRepository;
    
    @Inject
    private CacheService cacheService;
    
    @Inject
    private EventBus eventBus;
    
    public Product createProduct(String name, String description, BigDecimal price) {
        Product product = new Product(name, description, price);
        Product saved = productRepository.save(product);
        
        // Clear cache and publish event
        cacheService.evict("products:" + saved.getId());
        eventBus.publish(new ProductCreatedEvent(saved));
        
        return saved;
    }
    
    @Cacheable("products")
    public Optional&lt;Product&gt; findProduct(String id) {
        return productRepository.findById(id);
    }
    
    @CacheEvict("products")
    public void updateProduct(Product product) {
        productRepository.save(product);
        eventBus.publish(new ProductUpdatedEvent(product));
    }
}

@Component
@Singleton
public class OrderService {
    
    @Inject
    private OrderRepository orderRepository;
    
    @Inject
    private InventoryService inventoryService;
    
    @Inject
    private PaymentService paymentService;
    
    @Inject
    private EventBus eventBus;
    
    @Transactional
    public Order createOrder(String userId, List&lt;String&gt; productIds) {
        // Reserve inventory
        List&lt;Product&gt; products = inventoryService.reserveProducts(productIds);
        
        // Calculate total
        BigDecimal total = products.stream()
            .map(Product::getPrice)
            .reduce(BigDecimal.ZERO, BigDecimal::add);
        
        // Create order
        List&lt;OrderItem&gt; items = products.stream()
            .map(product -&gt; new OrderItem(product.getId(), 1, product.getPrice()))
            .collect(Collectors.toList());
            
        Order order = new Order(userId, items, total);
        Order saved = orderRepository.save(order);
        
        // Process payment asynchronously
        eventBus.publish(new PaymentRequiredEvent(saved.getId(), total));
        
        return saved;
    }
}

// Event handlers for complex business logic
@Component
public class InventoryEventHandler {
    
    @Inject
    private InventoryService inventoryService;
    
    @Subscribe
    public void handleOrderCreated(OrderCreatedEvent event) {
        // Reserve inventory
        inventoryService.reserveProducts(event.getProductIds());
    }
    
    @Subscribe
    public void handleOrderCancelled(OrderCancelledEvent event) {
        // Release inventory
        inventoryService.releaseProducts(event.getProductIds());
    }
}

@Component
public class NotificationEventHandler {
    
    @Inject
    private EmailService emailService;
    
    @Subscribe
    public void handleOrderCreated(OrderCreatedEvent event) {
        // Send order confirmation
        String message = "Your order " + event.getOrderId() + " has been created.";
        emailService.sendOrderConfirmation(event.getUserId(), message);
    }
    
    @Subscribe
    public void handlePaymentCompleted(PaymentCompletedEvent event) {
        // Send payment confirmation
        String message = "Payment of $" + event.getAmount() + " completed successfully.";
        emailService.sendPaymentConfirmation(event.getUserId(), message);
    }
}</code></pre>
                </div>

                <div class="card">
                    <h3>Microservices Communication</h3>
                    <p>Service-to-service communication using EventBus:</p>
                    
<pre><code>// Service A: User Service
@Component
@Singleton
public class UserService {
    
    @Inject
    private UserRepository userRepository;
    
    @Inject
    private EventBus eventBus;
    
    public User registerUser(String name, String email) {
        User user = new User(name, email);
        User saved = userRepository.save(user);
        
        // Publish event for other services
        eventBus.publish(new UserRegisteredEvent(saved.getId(), name, email));
        
        return saved;
    }
}

// Service B: Notification Service
@Component
public class NotificationService {
    
    @Inject
    private EmailService emailService;
    
    @Subscribe
    public void handleUserRegistered(UserRegisteredEvent event) {
        // Send welcome email
        String subject = "Welcome to our platform!";
        String body = "Hello " + event.getName() + ",\n\nWelcome to our platform!";
        
        emailService.sendEmail(event.getEmail(), subject, body);
        
        // Schedule welcome call
        eventBus.publish(new ScheduleWelcomeCallEvent(event.getUserId()));
    }
}

// Service C: Analytics Service
@Component
public class AnalyticsService {
    
    @Inject
    private AnalyticsRepository analyticsRepository;
    
    @Subscribe
    public void trackUserRegistration(UserRegisteredEvent event) {
        // Record analytics
        analyticsRepository.recordEvent("user_registered", Map.of(
            "timestamp", Instant.now(),
            "userId", event.getUserId()
        ));
    }
    
    @Subscribe
    public void trackOrderCreated(OrderCreatedEvent event) {
        // Record order analytics
        analyticsRepository.recordEvent("order_created", Map.of(
            "timestamp", Instant.now(),
            "orderId", event.getOrderId(),
            "userId", event.getUserId(),
            "total", event.getTotal()
        ));
    }
}</code></pre>
                </div>
            </section>

            <!-- Testing Examples -->
            <section>
                <h2>üß™ Testing Examples</h2>
                
                <div class="card">
                    <h3>Unit Testing with Veld</h3>
                    <p>Testing components in isolation:</p>
                    
<pre><code>// Test configuration
@Configuration
public class TestConfig {
    
    @Bean
    @Primary
    public UserRepository testUserRepository() {
        UserRepository mock = mock(UserRepository.class);
        
        // Mock behavior
        User testUser = new User("test-id", "Test User", "test@example.com");
        when(mock.save(any(User.class))).thenReturn(testUser);
        when(mock.findById("test-id")).thenReturn(Optional.of(testUser));
        when(mock.findById("non-existent")).thenReturn(Optional.empty());
        
        return mock;
    }
    
    @Bean
    @Primary
    public EmailService testEmailService() {
        return mock(EmailService.class);
    }
}

// Test class
@Component
public class UserServiceTest {
    
    private UserService userService;
    private UserRepository userRepository;
    
    @Before
    public void setUp() {
        // Create test container
        // Use the generated Veld class;
        container.register(TestConfig.class);
        container.start();
        
        // Get service under test
        userService = container.getBean(UserService.class);
        userRepository = container.getBean(UserRepository.class);
    }
    
    @Test
    public void testCreateUser() {
        // Arrange
        String name = "John Doe";
        String email = "john@example.com";
        
        // Act
        User result = userService.createUser(name, email);
        
        // Assert
        assertThat(result).isNotNull();
        assertThat(result.getName()).isEqualTo(name);
        assertThat(result.getEmail()).isEqualTo(email);
        
        // Verify repository was called
        verify(userRepository).save(argThat(user -&gt; 
            user.getName().equals(name) && user.getEmail().equals(email)));
    }
    
    @Test
    public void testFindExistingUser() {
        // Act
        Optional&lt;User&gt; result = userService.findUser("test-id");
        
        // Assert
        assertThat(result).isPresent();
        assertThat(result.get().getName()).isEqualTo("Test User");
    }
    
    @Test
    public void testFindNonExistentUser() {
        // Act
        Optional&lt;User&gt; result = userService.findUser("non-existent");
        
        // Assert
        assertThat(result).isEmpty();
    }
}</code></pre>
                </div>

                <div class="card">
                    <h3>Integration Testing</h3>
                    <p>Testing full application flows:</p>
                    
<pre><code>// Integration test configuration
@Configuration
@TestConfiguration
public class IntegrationTestConfig {
    
    @Bean
    @Primary
    public DataSource testDataSource() {
        // Use in-memory database for tests
        return new HikariDataSource(new HikariConfig() {{
            setJdbcUrl("jdbc:h2:mem:testdb");
            setUsername("sa");
            setPassword("");
            setDriverClassName("org.h2.Driver");
        }});
    }
    
    @Bean
    @Primary
    public EventBus testEventBus() {
        return new InMemoryEventBus(); // Synchronous for testing
    }
}

// Integration test
@Component
@SpringBootTest
public class UserRegistrationIntegrationTest {
    
    @Inject
    private UserService userService;
    
    @Inject
    private UserRepository userRepository;
    
    @Inject
    private TestEventCollector eventCollector;
    
    @Test
    public void testFullUserRegistrationFlow() {
        // Arrange
        String name = "Integration Test User";
        String email = "integration@example.com";
        
        // Act
        User user = userService.createUser(name, email);
        
        // Assert - User was saved
        assertThat(user).isNotNull();
        assertThat(user.getId()).isNotNull();
        
        // Assert - User can be retrieved
        Optional&lt;User&gt; retrieved = userRepository.findById(user.getId());
        assertThat(retrieved).isPresent();
        assertThat(retrieved.get().getName()).isEqualTo(name);
        
        // Assert - Events were published
        List&lt;Object&gt; events = eventCollector.getEvents();
        assertThat(events).hasSize(2);
        assertThat(events.get(0)).isInstanceOf(UserRegisteredEvent.class);
        assertThat(events.get(1)).isInstanceOf(EmailEvent.class);
        
        // Verify event data
        UserRegisteredEvent userEvent = (UserRegisteredEvent) events.get(0);
        assertThat(userEvent.userId()).isEqualTo(user.getId());
        assertThat(userEvent.email()).isEqualTo(email);
    }
}</code></pre>
                </div>
            </section>

            <!-- Best Practices -->
            <section>
                <h2>üí° Best Practices</h2>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">üèóÔ∏è</div>
                        <h3>Layer Separation</h3>
                        <p>Keep clear separation between controllers, services, and repositories for better maintainability.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">üîí</div>
                        <h3>Dependency Injection</h3>
                        <p>Prefer constructor injection for mandatory dependencies and field injection for optional ones.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">üìù</div>
                        <h3>Event-Driven Design</h3>
                        <p>Use EventBus for loose coupling between components and to handle cross-cutting concerns.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">üß™</div>
                        <h3>Testing Strategy</h3>
                        <p>Write unit tests for individual components and integration tests for full workflows.</p>
                    </div>
                </div>
            </section>

            <!-- Download Examples -->
            <section>
                <h2>üì• Download Examples</h2>
                
                <div class="card">
                    <h3>Complete Example Projects</h3>
                    <p>Download full example projects from our GitHub repository:</p>
                    
                    <div class="hero-actions">
                        <a href="https://github.com/yasmramos/Veld/tree/main/veld-example" class="btn btn-primary" target="_blank">
                            Basic Examples
                        </a>
                        <a href="https://github.com/yasmramos/Veld/tree/main/veld-spring-boot-example" class="btn btn-secondary" target="_blank">
                            Spring Boot Integration
                        </a>
                        <a href="https://github.com/yasmramos/Veld/tree/main/veld-benchmark" class="btn btn-secondary" target="_blank">
                            Performance Benchmarks
                        </a>
                    </div>
                </div>

                <div class="alert alert-info">
                    <strong>üîó More Examples:</strong> Check our GitHub repository for additional examples, including microservices, event sourcing, and advanced AOP patterns.
                </div>
            </section>
        </div>
    </main>

    <!-- Scroll to Top Button -->
    <button id="scroll-to-top" class="scroll-to-top" onclick="scrollToTop()">‚Üë</button>

    <!-- Scripts -->
    <script src="js/main.js"></script>
</body>
</html>