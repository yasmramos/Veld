<?xml version="1.0" encoding="UTF-8"?>
<!--
  Maven Settings Template for Veld Distribution
  
  Instructions:
  1. Copy this file to ~/.m2/settings.xml
  2. Replace the placeholder values with your actual credentials
  3. NEVER commit actual credentials to version control
  
  Required credentials:
  - Sonatype OSSRH username and password
  - GPG key information (optional, can use gpg-agent)
  
  For GitHub Actions, these are stored as secrets:
  - OSSRH_USERNAME
  - OSSRH_PASSWORD  
  - GPG_PASSPHRASE
  - GPG_KEYNAME
  - GPG_PRIVATE_KEY
-->
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 
                              https://maven.apache.org/xsd/settings-1.0.0.xsd">

    <!-- Local Repository Location -->
    <localRepository>${user.home}/.m2/repository</localRepository>
    
    <!-- Plugin Groups -->
    <pluginGroups>
        <pluginGroup>org.sonatype.plugins</pluginGroup>
    </pluginGroups>

    <!-- Servers for authentication -->
    <servers>
        <!-- Sonatype OSSRH Server -->
        <server>
            <id>ossrh</id>
            <username>${env.OSSRH_USERNAME}</username>
            <password>${env.OSSRH_PASSWORD}</password>
        </server>
        
        <!-- GitHub Packages Server -->
        <server>
            <id>github</id>
            <username>${env.GITHUB_USERNAME}</username>
            <password>${env.GITHUB_TOKEN}</password>
        </server>
        
        <!-- GPG Signing Server -->
        <server>
            <id>gpg.passphrase</id>
            <passphrase>${env.GPG_PASSPHRASE}</passphrase>
        </server>
        
        <!-- GPG Key Server -->
        <server>
            <id>gpg.keyname</id>
            <keyname>${env.GPG_KEYNAME}</keyname>
        </server>
    </servers>

    <!-- Mirrors -->
    <mirrors>
        <!-- Sonatype OSSRH Mirror -->
        <mirror>
            <id>ossrh-mirror</id>
            <mirrorOf>ossrh</mirrorOf>
            <name>Sonatype OSSRH Mirror</name>
            <url>https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/</url>
        </mirror>
        
        <!-- Maven Central Mirror (optional) -->
        <mirror>
            <id>central-mirror</id>
            <mirrorOf>central</mirrorOf>
            <name>Central Repository Mirror</name>
            <url>https://repo1.maven.org/maven2</url>
        </mirror>
    </mirrors>

    <!-- Profiles for distribution -->
    <profiles>
        <!-- Profile for releases to Maven Central -->
        <profile>
            <id>release</id>
            <activation>
                <activeByDefault>false</activeByDefault>
            </activation>
            <properties>
                <gpg.keyname>${env.GPG_KEYNAME}</gpg.keyname>
                <skipGpg>false</skipGpg>
            </properties>
        </profile>
        
        <!-- Profile for GitHub Packages -->
        <profile>
            <id>github</id>
            <activation>
                <activeByDefault>false</activeByDefault>
            </activation>
            <properties>
                <skipGpg>true</skipGpg>
            </properties>
        </profile>
        
        <!-- Profile for development builds -->
        <profile>
            <id>dev</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
            <properties>
                <skipGpg>true</skipGpg>
            </properties>
        </profile>
    </profiles>

    <!-- Active Profiles -->
    <activeProfiles>
        <activeProfile>dev</activeProfile>
    </activeProfiles>
</settings>